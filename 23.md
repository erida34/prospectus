### Глава 23: Служба электронной почты

#### 23.1 Основы
- **Надежность и масштабируемость**: Основа успешной системы электронной почты.
- **Архитектура**: Простая, понятная, хорошо документированная.
- **Открытые протоколы и стандарты**: Обеспечивают взаимодействие с другими системами.
- **Безопасность**: Важна при проектировании и реализации.
- **Неприкосновенность и хранение**: Соответствие политике компании и нормативно-правовым требованиям.

#### 23.1.1 Политика неприкосновенности
- **Описание**: Кто и при каких обстоятельствах может читать электронную почту.
- **Просмотр**: Электронная почта может быть просмотрена администраторами при диагностике.
- **Конфиденциальность**: Незашифрованная информация не должна отправляться через сети других лиц.
- **Реализация**: Системные администраторы должны обеспечить соблюдение политики.

#### 23.1.2 Пространства имен
- **Единый адрес**: Один адрес для внешней и внутренней почты.
- **Стандартизация**: Избегать адресов вида имя.фамилия из-за возможных конфликтов.
- **Маркеры**: Уникальные именные маркеры, возможность выбора пользователями.

#### 23.1.3 Надежность
- **Ожидания**: Электронная почта должна быть всегда доступна.
- **Сбои**: Серьезное происшествие, вызывающее панику и потерю времени.
- **Проектирование**: Ориентировано на надежность, использование RAID-систем.
- **Резерв**: План быстрого восстановления службы при сбое.

#### 23.1.4 Простота
- **Сложность снижает надежность**: Ограничьте количество машин, обеспечивающих службу электронной почты.
- **Не включайте рабочие станции**: Не используйте рабочие станции как серверы электронной почты.
- **Основные аспекты**: Транспортировка, доставка, доступ, обработка списков и фильтрация.
- **Архитектура**: Для небольших компаний все функции на одной машине, для крупных – разделение функций.
- **Избегайте шлюзов**: Используйте одни стандарты по всей сети.
- **Единый механизм для списков рассылки**: Упрощает поддержку и автоматизацию.
- **Перемещение почтовых ящиков**: Используйте DNS для перенаправления запросов.

#### 23.1.5 Блокировка спама и вирусов
- **Спам и вирусы**: Блокировать на сервере, а не на клиенте.
- **Совершенных программ не существует**: Спам и вирусы постоянно эволюционируют.
- **Централизация функции**: Использование специализированных служб для анализа спама.

#### 23.1.6 Универсальность
- **Открытые протоколы**: Использование SMTP для транспортировки электронной почты.
- **Поддержка клиентов**: Использование стандартных протоколов для максимальной совместимости.
- **Избегайте нестандартных протоколов**: Они ограничивают выбор клиентов и увеличивают затраты.

#### 23.1.7 Автоматизация
- **Автоматизация задач**: Упрощает часто выполняемые задачи и обеспечивает их надежное выполнение.
- **Создание учетной записи**: Автоматизировать создание и удаление учетных записей электронной почты.
- **Перемещение учетных записей**: Автоматизация перемещения учетных записей для перераспределения нагрузки.
- **Уведомления об увольнении**: Автоматическая отправка сообщений о перенаправлении и увольнении.
- **Администрирование списков рассылок**: Автоматизация создания, удаления и управления списками рассылок.

#### 23.1.8 Базовый мониторинг
- **Мониторинг машин**: Проверка доступности и подключения машин.
- **Мониторинг ресурсов**: Мониторинг дискового пространства, использования диска и загрузки процессора.
- **Мониторинг электронной почты**: Отслеживание электронной почты для postmaster и просмотр логов.

#### 23.1.9 Резервирование
- **Избыточность**: Введение резервирования для надежности системы электронной почты.
- **План восстановления**: План быстрого восстановления при сбое.
- **Резервирование узлов**: Использование RAID и других методов для внутреннего резервирования.
- **Избыточность клиентов**: Обеспечение избыточности доступа клиентов.

#### 23.1.10 Расширение
- **Расширение систем**: Подготовка к увеличению объема трафика и количества пользователей.
- **Расширение систем транспортировки**: Обеспечение способности системы справляться с пиками трафика.
- **Расширение систем доставки**: Предсказуемое расширение с ростом числа пользователей.
- **Расширение систем обработки списков**: Управление большими списками адресатов и пиками трафика.
- **Переход на IMAP4**: Учет особых требований по ресурсам сервера при переходе с POP3 на IMAP4.

#### 23.1.11 Вопросы безопасности
- **Уязвимости узлов передачи почты**: Узлы передачи почты являются целями для злоумышленников из-за их доступа к внешнему миру и внутренней сети.
- **Нежелательный контент**: Проверка электронной почты на вирусы и другой нежелательный контент перед доставкой.
- **Сканирование содержимого**: Обеспечение поддержки максимального количества форматов данных для проверки.
- **Архитектура безопасности**: Согласование почтовой системы с архитектурой безопасности компании.
- **Безопасный удаленный доступ**: Обеспечение безопасного механизма удаленного доступа к электронной почте.

#### 23.1.12 Распространение информации
- **Политики и функции**: Информирование пользователей о политиках и функциях системы электронной почты.
- **Риски электронной почты**: Предупреждение пользователей о рисках, связанных с электронной почтой.
- **Документирование системы**: Документирование системы электронной почты для системных администраторов.
- **Процедуры восстановления**: Документирование процедур восстановления после отказа и аварийного восстановления.

#### 23.2 Тонкости
- **Улучшение службы**: Введение шифрования, особая политика резервного копирования, развитый мониторинг и расширение системы обработки списков.

#### 23.2.1 Шифрование
- **Простота шифрования**: Введение простого в применении механизма шифрования, особенно для высшего руководства.
- **Интеграция шифрования**: Интеграция шифрования в почтовый клиент для удобства использования.
- **Управление ключами**: Хранилище для ключей шифрования и механизмы аннулирования ключей.
- **Экстренные ситуации**: Механизмы восстановления паролей и контроль ключей.

#### 23.2.2 Политика хранения электронной почты
- **Проблемы резервного копирования**: Удаление резервных копий электронной почты через короткий период времени.
- **Политика хранения документов**: Ограничение хранения документов и упрощение поиска нужных документов.
- **Соблюдение закона Сарбейнса–Оксли**: Реализация политики хранения электронной почты с учетом закона Сарбейнса–Оксли.

#### 23.2.3 Расширенный мониторинг
- **Сквозной мониторинг**: Воспроизведение отправки сообщения для обнаружения всех возможных проблем.
- **Реалистичный тест**: Тест должен максимально реалистично воспроизводить пользователя или транзакцию.

#### 23.2.4 Обработка больших списков
- **Управление списками рассылки**: Централизованное управление списками на почтовых серверах.
- **Защита списков**: Ограничение отправки сообщений по спискам только авторизованным лицам.
- **Политика списков**: Четкое указание допустимых списков и правил для их создания и управления.
- **Расширение для больших списков**: Использование коммерческих программ или консультантов для обработки больших объемов.
- **Мониторинг времени доставки**: Отслеживание времени доставки сообщений всем адресатам списка.

#### 23.3 Заключение
- **Важность электронной почты**: Электронная почта аналогична коммунальным услугам.
- **Расширение и мониторинг**: Не откладывать вопросы расширения, мониторинга и резервирования.
- **Безопасность**: Учитывать безопасность с самого начала.
- **Политики**: Определить политику пространства имен и неприкосновенности частной информации.
- **Шифрование**: Введение шифрования для защиты важной информации.
- **Хранение электронной почты**: Снижение времени хранения резервных копий электронной почты.
- **Сквозной мониторинг**: Обеспечение сквозного мониторинга для компаний, где электронная почта связана с получением дохода.
- **Обработка больших списков**: Учет особых требований для серверов обработки списков большого объема.
