### Глава 28. База программного обеспечения

#### 28.1 Основы

##### 28.1.1 Обоснование
- **Снижение дублирования усилий**: Экономит время и ресурсы.
- **Централизованное управление**: Обеспечивает доступ к новым версиям программ и исправлениям.
- **Целостность**: Все узлы имеют доступ к одним и тем же программам, что упрощает управление и использование.

##### 28.1.2 Технические требования
- **Пользовательские потребности**: Понимание требований пользователей, которые могут быть узкими или широкими.
- **Надежность**: Локальные файлы обычно доступны, удаленные файлы требуют надежной сети и сервера.
- **Высокая доступность**: Использование репликации или RAID для повышения доступности.

##### 28.1.3 Установите политику
- **Размещение пакетов**: Определить, кто может размещать программные пакеты.
- **Поддержка пакетов**: План действий, если поддерживающий специалист уволится.
- **Поддержка ОС**: Определить, какие ОС поддерживаются и как обрабатываются различия.
- **Обновление пакетов**: Ответственность за установку новых версий.
- **Решение проблем**: Отладка пакетов с открытым исходным кодом или сообщение об ошибках.
- **Удаление пакетов**: Политика удаления старых пакетов.
- **Охват распространения**: Определить, для кого предназначена база.
- **Запросы пользователей**: Процесс запроса внесения программ в базу.
- **Публикация политики**: Опубликовать политику в доступном месте.

##### 28.1.4 Выберите программу для базы
- **UNIX**: Рекомендуется использовать существующие системы управления базой, такие как Depot, LUDE, Modules, SEPP и GNU Stow.
- **Windows**: Можно использовать общую сетевую папку, FTP-сервер или веб-сайт для предоставления программ.
- **Устаревшая система**: Определить, усовершенствовать существующую систему или создать новую.

##### 28.1.5 Создайте руководство для процесса
- **Локальная процедура**: Документировать процедуру внесения новых программных пакетов, включая местные особенности.
- **Краткое руководство**: Создать краткое руководство для опытных системных администраторов.
- **Копирование команд**: Возможность копирования и вставки команд из документа в командную строку.

##### 28.1.6 Примеры

###### 28.1.6.1 UNIX
- **Сборка пакетов**: Пакеты собираются на определенном сервере для каждой поддерживаемой ОС.
- **Исходный код**: Хранится в директории /home/scr с поддиректориями для каждого пакета.
- **Установка пакетов**: В директориях, именуемых по названию пакета и номеру версии.
- **Символические ссылки**: Название пакета без версии – ссылка на последнюю поддерживаемую версию.
- **Тестирование новых программ**: Установка и тестирование перед представлением всем пользователям.
- **Символические ссылки в /sw/default/bin**: Для доступа к распространенным программам.
- **Сетевой доступ**: Использование NFS для предоставления доступа клиентам к одному и тому же программному обеспечению.
- **Автоматическое монтирование**: Использование средства автоматического монтирования для доступа к пакетам.
- **Репликация и надежность**: Использование репликации и RAID для повышения доступности базы.
- **Удаление программ**: Удаление директории с сервера и соответствующей строки в главном файле.
- **Контроль доступа**: Ограничение прав доступа для непривилегированных пользователей.
- **Пользовательские программы**: Создание директории /sw/contrib для установки программ пользователями.
- **Оболочки**: Использование оболочек для установки переменных среды и вызова программ.

###### 28.1.6.2 Windows
- **Самостоятельное администрирование**: Узлы Windows администрируются более самостоятельно.
- **Традиционная база**: FTP-сервер или директория файлового сервера с устанавливаемыми пакетами (ZIP-файлы или .EXE).
- **Политики установки**: Различные политики для самостоятельно устанавливаемых программ.
- **Общая папка**: Создание общей папки software на файловом сервере под Windows (CIFS).
- **Подпапки**:
  - **Стандартные**: Программы, одобренные для всех машин.
  - **Предустановленные**: Программы, уже установленные на новых компьютерах.
  - **Образы дисков**: Образы CD-ROM и DVD.
  - **Экспериментальные**: Программы, которые еще не одобрены.
  - **Администратор**: Средства, доступные только системным администраторам.
- **Документация**: Документ POLICY с общей политикой и особыми политиками для конкретных пакетов.
- **Версии Windows**: Подпапки для различных версий Windows.
- **Устаревшие программы**: Папка для старых программ, которые больше не поддерживаются.
- **Названия папок**: Конкретные названия папок для каждого пакета.
- **Документы README**: Документы с данными о программе, ограничениях лицензии и особенностях установки.
- **Репликация**: Репликация базы в различных частях компании для снижения использования пропускной способности сети.
- **Сетевая нагрузка**: База программного обеспечения под Windows создает меньшую нагрузку на сеть по сравнению с UNIX.
- **Документирование**: Иерархия папок описывает доступные программы, указания по локальной установке и документы политик.

#### 28.2 Тонкости

##### 28.2.1 Различные конфигурации для разных узлов
- **Символические ссылки**: Использование символических ссылок для локальных файлов конфигурации.
- **Перенаправляющие ссылки**: Символические ссылки, перенаправляющие на локальный диск и обратно на базу.

##### 28.2.2 Локальная репликация
- **Локальное хранение**: Копирование часто используемых пакетов на локальный диск.
- **Снижение нагрузки**: Снижение нагрузки на сеть и повышение быстродействия.
- **Обновления**: Обработка новых версий пакетов при ручной локальной репликации.
- **Резервное копирование**: Влияние локальной репликации на правила резервного копирования.
- **Кэш NFS**: Использование кэша NFS для автоматического кэширования данных только для чтения.

##### 28.2.3 Коммерческие программы в базе
- **Лицензии**: Включение коммерческих программ зависит от сложности лицензий.
- **Корпоративная лицензия**: Программы с корпоративной лицензией могут быть включены в базу.
- **Сервер лицензий**: Программы, связанные с сервером лицензий, могут быть доступны всем.
- **Авторизация**: Системный администратор должен обеспечить выполнение лицензий для программ с ограниченным доступом.
- **UNIX**: Использование групп для управления доступом к лицензированным программам.
- **Перенаправляющие ссылки**: Использование символических ссылок для различных серверов лицензий.
- **Решения**: Использование опыта других для решения сложных требований к распространению программ.

##### 28.2.4 Граждане второго сорта
- **Редкие ОС**: Поддержка ОС, которые не получают полную поддержку.
- **Минимальная база**: Предоставление минимального набора программ для специфических задач.
- **Политика**: Письменная политика для уровня поддержки и самостоятельной поддержки пользователей.
- **Инструменты**: Установка средств, необходимых для выполнения задач машины и системного администрирования.
- **Цепочка инструментов**: Специальные программы для создания программ, включая компиляторы, отладчики и системы контроля исходного кода.

#### 28.3 Заключение
- **Организация**: Базы программного обеспечения организуют распространение программных пакетов.
- **Windows и UNIX**: Различия в организации баз программного обеспечения.
- **Политика**: Письменная политика для управления базами программного обеспечения.
- **Простые базы**: Примеры простых баз для Windows и UNIX.
- **Индивидуальная настройка**: Решения для индивидуальной настройки узлов или групп узлов.
