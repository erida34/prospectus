# Глава 5. Сервисы

## Основные моменты
- **Сервер и сервис**: Сервер — это оборудование, а сервис — это функция, предоставляемая сервером.
- **Создание сервиса**: Создание сервиса включает в себя не только установку оборудования и программного обеспечения, но и обеспечение надежности, масштабируемости, мониторинга, обслуживания и поддержки.
- **Требования пользователей**: Основная обязанность системного администратора — предоставление пользователям необходимых сервисов.
- **Типичные сервисы**: DNS, электронная почта, сервисы аутентификации, подключения к сети, печать, удаленный доступ, сетевое лицензирование, хранение программ, резервное копирование, доступ к Интернету, DHCP, файловые сервисы.
- **Специализированные сервисы**: Бизнес-сервисы, такие как бухгалтерские, производственные и другие специализированные сервисы.

## Предоставление сервисов
- **Структурированное окружение**: Сервисы требуют структурированного компьютерного окружения, обслуживаемого системными администраторами.
- **Отдельные машины**: В небольших компаниях сервисы часто предоставляются отдельными машинами.
- **Общие сервисы**: В крупных сетях сервисы часто объединены для оптимизации и упрощения управления.

## Примеры использования
- **DNS**: Важный сервис, от которого зависят многие другие сервисы.
- **Электронная почта**: Критически важный сервис для коммуникации.
- **Печать**: Необходимый сервис для работы многих компаний.
- **Резервное копирование**: Важный сервис для защиты данных.

## Заключение
- **Эффективность**: Предоставление надежных и масштабируемых сервисов требует тщательного планирования и управления.
- **Управление**: Системные администраторы должны постоянно адаптироваться к изменяющимся требованиям пользователей и технологиям.
- **Поддержка**: Важно обеспечить надежную поддержку и мониторинг сервисов для минимизации простоев и повышения удовлетворенности пользователей.



### 5.1.1. Требования пользователей

Процесс создания нового сервиса всегда должен начинаться с учета требований пользователей. Сервис создается для пользователей, и если он не будет соответствовать их потребностям, затраченные усилия будут напрасны.

#### Основные моменты:
- **Основная обязанность**: Предоставление пользователям необходимых сервисов.
- **Изменение требований**: Требования пользователей меняются со временем.
- **Примеры сервисов**: DNS, электронная почта, сервисы аутентификации, подключения к сети, печать.
- **Специализированные сервисы**: Бизнес-сервисы, такие как бухгалтерские, производственные и другие.

#### Примеры использования:
- **DNS**: Критически важный сервис, от которого зависят многие другие сервисы.
- **Электронная почта**: Важный сервис для коммуникации.
- **Печать**: Необходимый сервис для работы многих компаний.
- **Резервное копирование**: Важный сервис для защиты данных.

#### Заключение:
- **Эффективность**: Предоставление надежных и масштабируемых сервисов требует тщательного планирования и управления.
- **Управление**: Системные администраторы должны постоянно адаптироваться к изменяющимся требованиям пользователей и технологиям.
- **Поддержка**: Важно обеспечить надежную поддержку и мониторинг сервисов для минимизации простоев и повышения удовлетворенности пользователей.

### 5.1.2. Эксплуатационные требования

Системные администраторы должны учитывать и другие требования к новым сервисам, о которых пользователи могут не знать. Эти требования включают административные и технические аспекты.

#### Основные моменты:
- **Административные требования**: Учет административных аспектов при создании сервиса.
- **Масштабируемость**: Обеспечение возможности масштабирования сервиса.
- **Обновление сервиса**: Планирование процесса обновления сервиса.
- **Безопасность**: Обеспечение безопасности сервиса и защиты данных.
- **Документация**: Важность хранения документации в стандартных местах.

#### Примеры использования:
- **DNS**: Критически важный сервис, от которого зависят многие другие сервисы.
- **Электронная почта**: Важный сервис для коммуникации.
- **Печать**: Необходимый сервис для работы многих компаний.
- **Удаленный доступ**: Важный сервис для удаленной работы.

#### Заключение:
- **Эффективность**: Предоставление надежных и масштабируемых сервисов требует тщательного планирования и управления.
- **Управление**: Системные администраторы должны постоянно адаптироваться к изменяющимся требованиям пользователей и технологиям.
- **Поддержка**: Важно обеспечить надежную поддержку и мониторинг сервисов для минимизации простоев и повышения удовлетворенности пользователей.

### 5.1.3. Примеры использования

#### Примеры сервисов:
- **DNS**: Критически важный сервис, от которого зависят многие другие сервисы.
- **Электронная почта**: Важный сервис для коммуникации.
- **Печать**: Необходимый сервис для работы многих компаний.
- **Резервное копирование**: Важный сервис для защиты данных.

#### Заключение:
- **Эффективность**: Предоставление надежных и масштабируемых сервисов требует тщательного планирования и управления.
- **Управление**: Системные администраторы должны постоянно адаптироваться к изменяющимся требованиям пользователей и технологиям.
- **Поддержка**: Важно обеспечить надежную поддержку и мониторинг сервисов для минимизации простоев и повышения удовлетворенности пользователей.

### 5.1.4. Альтернатива: множество недорогих серверов

Использование множества недорогих серверов может быть экономичным решением для масштабирования и распределения нагрузки.

#### Основные моменты:
- **Экономичность**: Использование множества недорогих серверов может быть экономичнее, чем использование одного дорогого сервера.
- **Масштабируемость**: Возможность легко масштабировать систему путем добавления новых серверов.
- **Надежность**: Использование множества серверов может повысить надежность за счет распределения нагрузки и резервирования.

#### Примеры использования:
- **Веб-серверы**: Использование множества недорогих серверов для обслуживания веб-трафика.
- **Кластерные системы**: Использование кластерных систем для распределения нагрузки и повышения надежности.

#### Заключение:
- **Эффективность**: Предоставление надежных и масштабируемых сервисов требует тщательного планирования и управления.
- **Управление**: Системные администраторы должны постоянно адаптироваться к изменяющимся требованиям пользователей и технологиям.
- **Поддержка**: Важно обеспечить надежную поддержку и мониторинг сервисов для минимизации простоев и повышения удовлетворенности пользователей.

### 5.1.5. Раздельные сети для административных функций

Создание отдельных сетей для административных функций может повысить надежность и безопасность сервисов.

#### Основные моменты:
- **Высокая пропускная способность**: Создание отдельных сетей для административных функций, таких как резервное копирование и мониторинг.
- **Надежность**: Отдельные сети не подвержены простоям основной сети.
- **Доступность**: Системные администраторы могут получить доступ к машине даже во время простоя основной сети.

#### Примеры использования:
- **Резервное копирование**: Высокая пропускная способность и надежность для резервного копирования.
- **Мониторинг**: Отдельная сеть для мониторинга, не подверженная простоям основной сети.

#### Заключение:
- **Эффективность**: Предоставление надежных и масштабируемых сервисов требует тщательного планирования и управления.
- **Управление**: Системные администраторы должны постоянно адаптироваться к изменяющимся требованиям пользователей и технологиям.
- **Поддержка**: Важно обеспечить надежную поддержку и мониторинг сервисов для минимизации простоев и повышения удовлетворенности пользователей.

### 5.1.6. Пример из практики

Пример из практики демонстрирует, как использование множества недорогих серверов может повысить надежность и масштабируемость сервисов.

#### Основные моменты:
- **Проблема**: Необходимость обслуживания большого количества запросов.
- **Решение**: Использование множества недорогих серверов для распределения нагрузки и повышения надежности.

#### Заключение:
- **Эффективность**: Предоставление надежных и масштабируемых сервисов требует тщательного планирования и управления.
- **Управление**: Системные администраторы должны постоянно адаптироваться к изменяющимся требованиям пользователей и технологиям.
- **Поддержка**: Важно обеспечить надежную поддержку и мониторинг сервисов для минимизации простоев и повышения удовлетворенности пользователей.



### 5.1.7. Среда окружения

Надежный сервис требует надежной среды окружения. Сервис должен быть размещен в надежной среде, обеспечивающей условия для его бесперебойной работы. Это включает в себя физическую безопасность, надежное энергоснабжение, контроль климата и сетевую инфраструктуру.

#### Основные моменты:
- **Физическая безопасность**: Ограничение доступа к серверному оборудованию для предотвращения физических повреждений и несанкционированного доступа.
- **Надежное энергоснабжение**: Обеспечение бесперебойного питания с использованием источников бесперебойного питания (UPS) и резервных генераторов.
- **Контроль климата**: Поддержание оптимальных температурных условий для работы оборудования с использованием систем охлаждения и вентиляции.
- **Сетевая инфраструктура**: Обеспечение надежной и высокоскоростной сетевой связи для поддержки работы сервисов.

#### Примеры использования:
- **Дата-центры**: Специализированные помещения, обеспечивающие все необходимые условия для надежной работы серверного оборудования.
- **Резервное копирование**: Обеспечение надежного хранения и восстановления данных в случае сбоев.
- **Мониторинг и обслуживание**: Постоянный мониторинг состояния сервисов и оборудования для своевременного выявления и устранения проблем.

#### Заключение:
- **Эффективность**: Создание надежной среды окружения повышает надежность и эффективность работы сервисов.
- **Управление**: Системные администраторы должны постоянно контролировать и улучшать условия среды окружения для обеспечения бесперебойной работы сервисов.
- **Поддержка**: Важно обеспечить надежную поддержку и мониторинг сервисов для минимизации простоев и повышения удовлетворенности пользователей.


### 5.1.9. Надежность

Надежный сервис должен быть доступен и функционировать корректно в течение всего времени, когда он необходим. Надежность включает в себя несколько аспектов, таких как доступность, безопасность, производительность и устойчивость к сбоям.

#### Основные моменты:
- **Доступность**: Сервис должен быть доступен для пользователей в любое время, когда он необходим.
- **Безопасность**: Сервис должен быть защищен от несанкционированного доступа и атак.
- **Производительность**: Сервис должен работать эффективно и без задержек.
- **Устойчивость к сбоям**: Сервис должен продолжать работать корректно даже в случае сбоев или неисправностей.

#### Примеры использования:
- **DNS**: Критически важный сервис, от которого зависят многие другие сервисы.
- **Электронная почта**: Важный сервис для коммуникации.
- **Печать**: Необходимый сервис для работы многих компаний.
- **Резервное копирование**: Важный сервис для защиты данных.

#### Заключение:
- **Эффективность**: Предоставление надежных и масштабируемых сервисов требует тщательного планирования и управления.
- **Управление**: Системные администраторы должны постоянно адаптироваться к изменяющимся требованиям пользователей и технологиям.
- **Поддержка**: Важно обеспечить надежную поддержку и мониторинг сервисов для минимизации простоев и повышения удовлетворенности пользователей.


### 5.1.10. Один сервер или несколько

- **Независимые сервисы** должны находиться на отдельных машинах, если позволяет финансирование и персонал.
- **Выбор между одной или несколькими машинами** зависит от безопасности, производительности и масштабируемости.
  - **Пример**: Веб-сайт с базой данных должен иметь базу данных на отдельной машине для безопасности и масштабируемости.
  - **LDAP-сервер** должен быть на выделенной машине, если будет использоваться другими приложениями.
  - **Взаимосвязанные приложения** могут быть на одной машине для упрощения управления.

### 5.1.11. Централизация и стандарты

- **Централизация** инструментария, приложений и сервисов управляется центральной группой системных администраторов.
- **Поддержка сервисов** должна быть стандартизирована для упрощения управления и снижения затрат на обучение.
- **Интеграция сервисов** должна быть правильной и документированной для быстрой реакции службы поддержки.
- **Региональная централизация** возможна для некоторых сервисов, таких как электронная почта и аутентификация.
- **Файловые серверы и процессорные фермы** могут быть централизованы на уровне подразделений.


### 5.1.12. Производительность

- **Производительность** критична для пользовательского опыта.
- **Тестирование нагрузки** необходимо для оценки производительности сервиса.
- **Планирование мощностей** важно для поддержания производительности при росте нагрузки.
- **Пример**: Недостаточная производительность новой системы электронных квитанций привела к негативному первому впечатлению.
- **Оптимизация**: Выбор серверов должен учитывать особенности работы сервиса (дисковая система, память, сетевые интерфейсы).
- **Удаленные сети**: Могут требовать специальных решений для поддержания производительности.

### 5.1.13. Мониторинг

- **Мониторинг** необходим для отслеживания производительности и проблем.
- **Автоматические оповещения** помогают быстро реагировать на проблемы.
- **Планирование мощностей** включает мониторинг использования ресурсов.
- **Пример**: Внедрение мониторинга позволяет решать проблемы до того, как их заметят пользователи.

### 5.1.14. Разворачивание сервиса

- **Первое впечатление** важно для восприятия сервиса пользователями.
- **Документация и поддержка** должны быть готовы к запуску.
- **Методы внедрения**: Использование постепенного развертывания "одна, несколько, много".
- **Идеально**: Сервис не должен требовать нового ПО или конфигурации на настольных компьютерах.

### 5.2. Тонкости

- **Выделенные машины** упрощают обслуживание и поддержку сервисов.
- **Полная избыточность** необходима для критически важных сервисов.

### 5.2.1. Выделенные машины

- **Идеально**: Каждый сервис на выделенной машине для повышения надежности и упрощения отладки.
- **Пример**: Synopsys использовала одну центральную машину для множества сервисов, что привело к проблемам при росте компании.
- **Разделение сервисов** сложно из-за зависимостей IP-адресов и конфигураций.

### 5.2.2. Полная избыточность

- **Избыточность**: Дублирующие серверы для поддержания работы при сбое основного сервера.
- **Типы избыточности**: Ручное вмешательство, автоматический переход, разделение нагрузки.
- **Пример**: Bell Labs использовала избыточные узлы для входящей и исходящей почты, обеспечивая надежность и масштабируемость.
- **Преимущества**: Упрощение модернизации и поддержание работы при сбое одного узла.

### 5.2.3. Потоковый анализ для масштабирования

- **Потоковая модель**: Список транзакций и их зависимостей с информацией об использовании ресурсов.
- **Пример**: Страта использовала потоковую модель для масштабирования интернет-сервисов.
- **Узкие места**: Идентификация и устранение узких мест, таких как поиск имен через DNS.
- **Анализ ресурсов**: Оценка использования памяти, пакетов, сокетов и других ресурсов для каждой транзакции.
- **Пример анализа**: Проблема с медленным открытием файлов была решена путем добавления дополнительного сервера каталогов.

### 5.3. Заключение

- **Важность разработки сервисов**: Ключевая часть работы системного администратора.
- **Обслуживание и поддержка**: Легкость обслуживания и поддержки зависит от качества разработки сервиса.
- **Потребности пользователей**: Всегда учитывать потребности пользователей при создании сервисов.
- **Улучшение обслуживания**: Создание выделенных серверов, мониторинг, следование стандартам и централизация сервисов.
- **Надежность и избыточность**: Сервисы должны быть надежными и избыточными, особенно в крупных компаниях.
- **Постепенное развертывание**: Важно минимизировать помехи для пользователей при внедрении нового сервиса.